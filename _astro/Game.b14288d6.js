import{u as j,c as F,a as q,$ as K,b as U,d as X,e as z,o as J,g as L,f as W,i as $,h as C,r as O,t as T,F as Q,S as D,j as Z,k as ee,l as te}from"./web.e4611299.js";var G=()=>{};function ne(e,n){const t=j(e),{onChange:o}=n;let r=new Set(n.appear?void 0:t);const a=new WeakSet,[u,l]=F([],{equals:!1}),[i]=U(),s=n.exitMethod==="remove"?G:d=>{l(c=>(c.push.apply(c,d),c));for(const c of d)a.delete(c)},x=n.exitMethod==="remove"?G:n.exitMethod==="keep-index"?(d,c,v)=>d.splice(v,0,c):(d,c)=>d.push(c);return q(d=>{const c=u(),v=e();if(v[K],j(i))return i(),d;if(c.length){const h=d.filter(g=>!c.includes(g));return c.length=0,o({list:h,added:[],removed:[],unchanged:h,finishRemoved:s}),h}return j(()=>{const h=new Set(v),g=v.slice(),b=[],m=[],M=[];for(const k of v)(r.has(k)?M:b).push(k);let w=!b.length;for(let k=0;k<d.length;k++){const f=d[k];h.has(f)||(a.has(f)||(m.push(f),a.add(f)),x(g,f,k)),w&&f!==g[k]&&(w=!1)}return!m.length&&w?d:(o({list:g,added:b,removed:m,unchanged:M,finishRemoved:s}),r=h,g)})},n.appear?[]:t.slice())}var H=e=>e instanceof Element;function N(e,n){if(n(e))return e;if(typeof e=="function"&&!e.length)return N(e(),n);if(Array.isArray(e)){const t=[];for(const o of e){const r=N(o,n);r&&(Array.isArray(r)?t.push.apply(t,r):t.push(r))}return t.length?t:null}return null}function ie(e,n=H,t=H){const o=q(e),r=q(()=>N(o(),n));return r.toArray=()=>{const a=r();return Array.isArray(a)?a:a?[a]:[]},r}function re(e){return q(()=>{const n=e.name||"s";return{enterActive:(e.enterActiveClass||n+"-enter-active").split(" "),enter:(e.enterClass||n+"-enter").split(" "),enterTo:(e.enterToClass||n+"-enter-to").split(" "),exitActive:(e.exitActiveClass||n+"-exit-active").split(" "),exit:(e.exitClass||n+"-exit").split(" "),exitTo:(e.exitToClass||n+"-exit-to").split(" "),move:(e.moveClass||n+"-move").split(" ")}})}function Y(e){requestAnimationFrame(()=>requestAnimationFrame(e))}function oe(e,n,t,o){const{onBeforeEnter:r,onEnter:a,onAfterEnter:u}=n;r?.(t),t.classList.add(...e.enter),t.classList.add(...e.enterActive),queueMicrotask(()=>{if(!t.parentNode)return o?.();a?.(t,()=>l())}),Y(()=>{t.classList.remove(...e.enter),t.classList.add(...e.enterTo),(!a||a.length<2)&&(t.addEventListener("transitionend",l),t.addEventListener("animationend",l))});function l(i){(!i||i.target===t)&&(o?.(),t.removeEventListener("transitionend",l),t.removeEventListener("animationend",l),t.classList.remove(...e.enterActive),t.classList.remove(...e.enterTo),u?.(t))}}function ae(e,n,t,o){const{onBeforeExit:r,onExit:a,onAfterExit:u}=n;if(!t.parentNode)return o?.();r?.(t),t.classList.add(...e.exit),t.classList.add(...e.exitActive),a?.(t,()=>l()),Y(()=>{t.classList.remove(...e.exit),t.classList.add(...e.exitTo),(!a||a.length<2)&&(t.addEventListener("transitionend",l),t.addEventListener("animationend",l))});function l(i){(!i||i.target===t)&&(o?.(),t.removeEventListener("transitionend",l),t.removeEventListener("animationend",l),t.classList.remove(...e.exitActive),t.classList.remove(...e.exitTo),u?.(t))}}var se=e=>{const n=re(e);return ne(ie(()=>e.children).toArray,{appear:e.appear,exitMethod:"keep-index",onChange({added:t,removed:o,finishRemoved:r,list:a}){const u=n();for(const i of t)oe(u,e,i);const l=[];for(const i of a)i.isConnected&&(i instanceof HTMLElement||i instanceof SVGElement)&&l.push({el:i,rect:i.getBoundingClientRect()});queueMicrotask(()=>{const i=[];for(const{el:s,rect:x}of l)if(s.isConnected){const d=s.getBoundingClientRect(),c=x.left-d.left,v=x.top-d.top;(c||v)&&(s.style.transform=`translate(${c}px, ${v}px)`,s.style.transitionDuration="0s",i.push(s))}document.body.offsetHeight;for(const s of i){let x=function(d){(d.target===s||/transform$/.test(d.propertyName))&&(s.removeEventListener("transitionend",x),s.classList.remove(...u.move))};s.classList.add(...u.move),s.style.transform=s.style.transitionDuration="",s.addEventListener("transitionend",x)}});for(const i of o)ae(u,e,i,()=>r([i]))}})};const ce=T('<div class="text-xl text-blue-500 dark:text-blue-300 font-semibold text-center mt-5">You have won!!!'),le=T('<div><div class="text-center mb-5"><button class="text-lg font-medium text-blue-500 dark:text-blue-300">Score: <!$><!/></button></div><div class="flex justify-center mb-5"><button class="bg-blue-500 dark:bg-blue-300 text-white dark:text-black px-3 py-2 rounded">Reset</button></div><div class="select-none grid grid-cols-4 gap-2 bg-blue-100 dark:bg-blue-950 rounded-lg p-3 max-w-sm mx-auto"></div><!$><!/>'),de=T("<div>fallback"),ue=T("<span>"),fe=T('<div class="group-item rounded text-2xl font-bold flex justify-center items-center w-full aspect-ratio-square">'),y=e=>({value:e});function I(e,n=1){const t=[...e];let o=0;for(;o<n;){if(t.every(a=>a.value>0))return t;const r=Math.floor(Math.random()*t.length);t[r].value>0||(t[r]=y(Math.random()>.5?2:4),o++)}return t}function P(){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].map(n=>y(0));return I(e,2)}function _(e){return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}function S(e){return e.flat()}function V(e){return e.map(t=>[...t])}function p(e){const n=V(e);return e.forEach((t,o)=>{t.forEach((r,a)=>{n[a][4-1-o]=r})}),n}function E(e){const n=V(e);return e.forEach((t,o)=>{t.forEach((r,a)=>{n[4-1-a][o]=r})}),n}function R(e,n){const t=V(e);for(let o=0;o<4;o++){const r=t[o];let a=!0;for(let u=2;u>=0;u--){const l=r[u];if(l.value===0)continue;let i=u+1;for(;!(i>=4);){const s=r[i];if(a&&l.value===s.value){r[u]=y(0),r[i]=y(l.value*2),a=!1,n(l.value*2);break}if(s.value>0)break;i++}}for(let u=2;u>=0;u--){const l=r[u];if(l.value===0)continue;let i=u;for(;;){const s=r[i+1];if(!s||s.value>0||i===3)break;if(s.value===0)i+=1;else break}r[u]=y(0),r[i]=l}}return t}function ve(e,n){return e.length!==n.length?!1:e.every((t,o)=>n[o].value===t.value)}function ge(){const[e,n]=F(P()),[t,o]=F(!1),[r,a]=F(0);function u(i){a(s=>s+i)}function l(){n(P()),o(!1),a(0)}return z(()=>{e().some(i=>i.value===2048)&&o(!0)}),J(()=>{const i=s=>{if(t())return;let x=0;function d(c){ve(e(),c)||(n(I(c)),u(x))}switch(s.key){case"ArrowUp":{const c=_(e()),v=p(c),h=R(v,m=>x+=m),g=E(h),b=S(g);d(b);break}case"ArrowDown":{const c=_(e()),v=p(p(p(c))),h=R(v,m=>x+=m),g=E(E(E(h))),b=S(g);d(b);break}case"ArrowRight":{const c=_(e()),v=R(c,g=>x+=g),h=S(v);d(h);break}case"ArrowLeft":{const c=_(e()),v=p(p(c)),h=R(v,m=>x+=m),g=E(E(h)),b=S(g);d(b);break}}};document.addEventListener("keydown",i),ee(()=>{document.removeEventListener("keydown",i)})}),(()=>{const i=L(le),s=i.firstChild,x=s.firstChild,d=x.firstChild,c=d.nextSibling,[v,h]=W(c.nextSibling),g=s.nextSibling,b=g.firstChild,m=g.nextSibling,M=m.nextSibling,[w,k]=W(M.nextSibling);return x.$$click=l,$(x,r,v,h),b.$$click=l,$(m,C(se,{name:"group-item",get children(){return C(Q,{get each(){return e()},get fallback(){return L(de)},children:f=>(()=>{const B=L(fe);return $(B,C(D,{get when(){return f.value>0},get children(){const A=L(ue);return $(A,()=>f.value),A}})),Z(A=>te(B,{"bg-blue-200 dark:bg-blue-900":f.value===0,"bg-indigo-300 dark:bg-indigo-800 text-indigo-800 dark:text-indigo-400":f.value===2,"bg-indigo-400 dark:bg-indigo-700 text-indigo-900 dark:text-indigo-300":f.value===4,"bg-violet-300 dark:bg-violet-800 text-violet-800 dark:text-violet-400":f.value===8,"bg-violet-400 dark:bg-violet-700 text-violet-900 dark:text-violet-300":f.value===16,"bg-purple-300 dark:bg-purple-800 text-purple-800 dark:text-violet-400":f.value===32,"bg-purple-400 dark:bg-purple-700 text-purple-900 dark:text-violet-300":f.value===64,"bg-fuchsia-300 dark:bg-fuchsia-800 text-fuchsia-800 dark:text-fuchsia-400":f.value===128,"bg-fuchsia-400 dark:bg-fuchsia-700 text-fuchsia-900 dark:text-fuchsia-400":f.value===256,"bg-pink-300 dark:bg-pink-800 text-pink-800 dark:text-pink-400":f.value===512,"bg-pink-400 dark:bg-pink-700 text-pink-900 dark:text-pink-300":f.value===1024,"bg-red-500 dark:bg-red-600 text-red-900 dark:text-red-100":f.value===2048},A)),B})()})}})),$(i,C(D,{get when(){return t()},get children(){return L(ce)}}),w,k),O(),i})()}X(["click"]);export{ge as default};
