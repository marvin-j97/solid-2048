import{u as j,c as C,a as B,$ as ee,b as te,d as ne,e as ie,o as re,g as y,f as G,i as L,h as M,r as oe,t as _,F as ae,S as D,j as se,k as ce,l as le}from"./web.e4611299.js";var O=()=>{};function de(e,n){const t=j(e),{onChange:o}=n;let i=new Set(n.appear?void 0:t);const a=new WeakSet,[d,c]=C([],{equals:!1}),[r]=te(),u=n.exitMethod==="remove"?O:l=>{c(s=>(s.push.apply(s,l),s));for(const s of l)a.delete(s)},v=n.exitMethod==="remove"?O:n.exitMethod==="keep-index"?(l,s,x)=>l.splice(x,0,s):(l,s)=>l.push(s);return B(l=>{const s=d(),x=e();if(x[ee],j(r))return r(),l;if(s.length){const f=l.filter(g=>!s.includes(g));return s.length=0,o({list:f,added:[],removed:[],unchanged:f,finishRemoved:u}),f}return j(()=>{const f=new Set(x),g=x.slice(),b=[],h=[],p=[];for(const E of x)(i.has(E)?p:b).push(E);let k=!b.length;for(let E=0;E<l.length;E++){const $=l[E];f.has($)||(a.has($)||(h.push($),a.add($)),v(g,$,E)),k&&$!==g[E]&&(k=!1)}return!h.length&&k?l:(o({list:g,added:b,removed:h,unchanged:p,finishRemoved:u}),i=f,g)})},n.appear?[]:t.slice())}var P=e=>e instanceof Element;function N(e,n){if(n(e))return e;if(typeof e=="function"&&!e.length)return N(e(),n);if(Array.isArray(e)){const t=[];for(const o of e){const i=N(o,n);i&&(Array.isArray(i)?t.push.apply(t,i):t.push(i))}return t.length?t:null}return null}function ue(e,n=P,t=P){const o=B(e),i=B(()=>N(o(),n));return i.toArray=()=>{const a=i();return Array.isArray(a)?a:a?[a]:[]},i}function fe(e){return B(()=>{const n=e.name||"s";return{enterActive:(e.enterActiveClass||n+"-enter-active").split(" "),enter:(e.enterClass||n+"-enter").split(" "),enterTo:(e.enterToClass||n+"-enter-to").split(" "),exitActive:(e.exitActiveClass||n+"-exit-active").split(" "),exit:(e.exitClass||n+"-exit").split(" "),exitTo:(e.exitToClass||n+"-exit-to").split(" "),move:(e.moveClass||n+"-move").split(" ")}})}function U(e){requestAnimationFrame(()=>requestAnimationFrame(e))}function ve(e,n,t,o){const{onBeforeEnter:i,onEnter:a,onAfterEnter:d}=n;i?.(t),t.classList.add(...e.enter),t.classList.add(...e.enterActive),queueMicrotask(()=>{if(!t.parentNode)return o?.();a?.(t,()=>c())}),U(()=>{t.classList.remove(...e.enter),t.classList.add(...e.enterTo),(!a||a.length<2)&&(t.addEventListener("transitionend",c),t.addEventListener("animationend",c))});function c(r){(!r||r.target===t)&&(o?.(),t.removeEventListener("transitionend",c),t.removeEventListener("animationend",c),t.classList.remove(...e.enterActive),t.classList.remove(...e.enterTo),d?.(t))}}function xe(e,n,t,o){const{onBeforeExit:i,onExit:a,onAfterExit:d}=n;if(!t.parentNode)return o?.();i?.(t),t.classList.add(...e.exit),t.classList.add(...e.exitActive),a?.(t,()=>c()),U(()=>{t.classList.remove(...e.exit),t.classList.add(...e.exitTo),(!a||a.length<2)&&(t.addEventListener("transitionend",c),t.addEventListener("animationend",c))});function c(r){(!r||r.target===t)&&(o?.(),t.removeEventListener("transitionend",c),t.removeEventListener("animationend",c),t.classList.remove(...e.exitActive),t.classList.remove(...e.exitTo),d?.(t))}}var ge=e=>{const n=fe(e);return de(ue(()=>e.children).toArray,{appear:e.appear,exitMethod:"keep-index",onChange({added:t,removed:o,finishRemoved:i,list:a}){const d=n();for(const r of t)ve(d,e,r);const c=[];for(const r of a)r.isConnected&&(r instanceof HTMLElement||r instanceof SVGElement)&&c.push({el:r,rect:r.getBoundingClientRect()});queueMicrotask(()=>{const r=[];for(const{el:u,rect:v}of c)if(u.isConnected){const l=u.getBoundingClientRect(),s=v.left-l.left,x=v.top-l.top;(s||x)&&(u.style.transform=`translate(${s}px, ${x}px)`,u.style.transitionDuration="0s",r.push(u))}document.body.offsetHeight;for(const u of r){let v=function(l){(l.target===u||/transform$/.test(l.propertyName))&&(u.removeEventListener("transitionend",v),u.classList.remove(...d.move))};u.classList.add(...d.move),u.style.transform=u.style.transitionDuration="",u.addEventListener("transitionend",v)}});for(const r of o)xe(d,e,r,()=>i([r]))}})};const he=_('<div class="text-xl text-blue-500 dark:text-blue-300 font-semibold text-center mt-5">You have won!!!'),me=_('<div><div class="text-center mb-5"><div class="text-lg font-medium text-blue-500 dark:text-blue-300">Score: <!$><!/></div><div class="text-lg font-medium text-amber-700 dark:text-amber-300">Highscore: <!$><!/></div></div><div class="flex justify-center mb-5"><button class="bg-blue-500 dark:bg-blue-300 text-white dark:text-black px-3 py-2 rounded">Reset</button></div><div class="select-none grid grid-cols-4 gap-2 bg-blue-100 dark:bg-blue-950 rounded-lg p-3 max-w-sm mx-auto"></div><!$><!/>'),be=_("<div>fallback"),ke=_("<span>"),pe=_('<div class="group-item rounded text-2xl font-bold flex justify-center items-center w-full aspect-ratio-square">'),S=e=>({value:e});function X(e,n=1){const t=[...e];let o=0;for(;o<n;){if(t.every(a=>a.value>0))return t;const i=Math.floor(Math.random()*t.length);t[i].value>0||(t[i]=S(Math.random()>.5?2:4),o++)}return t}function Y(){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].map(n=>S(0));return X(e,2)}function R(e){return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}function F(e){return e.flat()}function V(e){return e.map(t=>[...t])}function w(e){const n=V(e);return e.forEach((t,o)=>{t.forEach((i,a)=>{n[a][4-1-o]=i})}),n}function T(e){const n=V(e);return e.forEach((t,o)=>{t.forEach((i,a)=>{n[4-1-a][o]=i})}),n}function q(e,n){const t=V(e);for(let o=0;o<4;o++){const i=t[o];let a=!0;for(let d=2;d>=0;d--){const c=i[d];if(c.value===0)continue;let r=d+1;for(;!(r>=4);){const u=i[r];if(a&&c.value===u.value){i[d]=S(0),i[r]=S(c.value*2),a=!1,n(c.value*2);break}if(u.value>0)break;r++}}for(let d=2;d>=0;d--){const c=i[d];if(c.value===0)continue;let r=d;for(;;){const u=i[r+1];if(!u||u.value>0||r===3)break;if(u.value===0)r+=1;else break}i[d]=S(0),i[r]=c}}return t}function Ee(e,n){return e.length!==n.length?!1:e.every((t,o)=>n[o].value===t.value)}const K="highscore";function Le(){const[e,n]=C(Y()),[t,o]=C(!1),[i,a]=C(0),[d,c]=C(0);function r(v){a(s=>s+v);const l=i();l>d()&&(localStorage.setItem(K,l.toString()),c(l))}function u(){n(Y()),o(!1),a(0)}return ie(()=>{e().some(v=>v.value===2048)&&o(!0)}),re(()=>{c(+(localStorage.getItem(K)??"0"));const v=l=>{if(t())return;let s=0;function x(f){Ee(e(),f)||(n(X(f)),r(s))}switch(l.key){case"ArrowUp":{const f=R(e()),g=w(f),b=q(g,k=>s+=k),h=T(b),p=F(h);x(p);break}case"ArrowDown":{const f=R(e()),g=w(w(w(f))),b=q(g,k=>s+=k),h=T(T(T(b))),p=F(h);x(p);break}case"ArrowRight":{const f=R(e()),g=q(f,h=>s+=h),b=F(g);x(b);break}case"ArrowLeft":{const f=R(e()),g=w(w(f)),b=q(g,k=>s+=k),h=T(T(b)),p=F(h);x(p);break}}};document.addEventListener("keydown",v),ce(()=>{document.removeEventListener("keydown",v)})}),(()=>{const v=y(me),l=v.firstChild,s=l.firstChild,x=s.firstChild,f=x.nextSibling,[g,b]=G(f.nextSibling),h=s.nextSibling,p=h.firstChild,k=p.nextSibling,[E,$]=G(k.nextSibling),I=l.nextSibling,z=I.firstChild,W=I.nextSibling,J=W.nextSibling,[Q,Z]=G(J.nextSibling);return L(s,i,g,b),L(h,d,E,$),z.$$click=u,L(W,M(ge,{name:"group-item",get children(){return M(ae,{get each(){return e()},get fallback(){return y(be)},children:m=>(()=>{const H=y(pe);return L(H,M(D,{get when(){return m.value>0},get children(){const A=y(ke);return L(A,()=>m.value),A}})),se(A=>le(H,{"bg-blue-200 dark:bg-blue-900":m.value===0,"bg-indigo-300 dark:bg-indigo-800 text-indigo-800 dark:text-indigo-400":m.value===2,"bg-indigo-400 dark:bg-indigo-700 text-indigo-900 dark:text-indigo-300":m.value===4,"bg-violet-300 dark:bg-violet-800 text-violet-800 dark:text-violet-400":m.value===8,"bg-violet-400 dark:bg-violet-700 text-violet-900 dark:text-violet-300":m.value===16,"bg-purple-300 dark:bg-purple-800 text-purple-800 dark:text-violet-400":m.value===32,"bg-purple-400 dark:bg-purple-700 text-purple-900 dark:text-violet-300":m.value===64,"bg-fuchsia-300 dark:bg-fuchsia-800 text-fuchsia-800 dark:text-fuchsia-400":m.value===128,"bg-fuchsia-400 dark:bg-fuchsia-700 text-fuchsia-900 dark:text-fuchsia-400":m.value===256,"bg-pink-300 dark:bg-pink-800 text-pink-800 dark:text-pink-400":m.value===512,"bg-pink-400 dark:bg-pink-700 text-pink-900 dark:text-pink-300":m.value===1024,"bg-red-500 dark:bg-red-600 text-red-900 dark:text-red-100":m.value===2048},A)),H})()})}})),L(v,M(D,{get when(){return t()},get children(){return y(he)}}),Q,Z),oe(),v})()}ne(["click"]);export{Le as default};
