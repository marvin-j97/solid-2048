import{u as B,c as y,a as F,$ as te,b as ne,d as ie,e as oe,o as N,g as $,f as D,i as w,h as _,r as re,t as M,F as ae,S as V,j as se,k as Y,l as ce}from"./web.e4611299.js";var W=()=>{};function le(e,n){const t=B(e),{onChange:s}=n;let i=new Set(n.appear?void 0:t);const c=new WeakSet,[d,l]=y([],{equals:!1}),[a]=ne(),u=n.exitMethod==="remove"?W:o=>{l(r=>(r.push.apply(r,o),r));for(const r of o)c.delete(r)},m=n.exitMethod==="remove"?W:n.exitMethod==="keep-index"?(o,r,v)=>o.splice(v,0,r):(o,r)=>o.push(r);return F(o=>{const r=d(),v=e();if(v[te],B(a))return a(),o;if(r.length){const h=o.filter(x=>!r.includes(x));return r.length=0,s({list:h,added:[],removed:[],unchanged:h,finishRemoved:u}),h}return B(()=>{const h=new Set(v),x=v.slice(),f=[],k=[],p=[];for(const g of v)(i.has(g)?p:f).push(g);let b=!f.length;for(let g=0;g<o.length;g++){const E=o[g];h.has(E)||(c.has(E)||(k.push(E),c.add(E)),m(x,E,g)),b&&E!==x[g]&&(b=!1)}return!k.length&&b?o:(s({list:x,added:f,removed:k,unchanged:p,finishRemoved:u}),i=h,x)})},n.appear?[]:t.slice())}var O=e=>e instanceof Element;function H(e,n){if(n(e))return e;if(typeof e=="function"&&!e.length)return H(e(),n);if(Array.isArray(e)){const t=[];for(const s of e){const i=H(s,n);i&&(Array.isArray(i)?t.push.apply(t,i):t.push(i))}return t.length?t:null}return null}function de(e,n=O,t=O){const s=F(e),i=F(()=>H(s(),n));return i.toArray=()=>{const c=i();return Array.isArray(c)?c:c?[c]:[]},i}function ue(e){return F(()=>{const n=e.name||"s";return{enterActive:(e.enterActiveClass||n+"-enter-active").split(" "),enter:(e.enterClass||n+"-enter").split(" "),enterTo:(e.enterToClass||n+"-enter-to").split(" "),exitActive:(e.exitActiveClass||n+"-exit-active").split(" "),exit:(e.exitClass||n+"-exit").split(" "),exitTo:(e.exitToClass||n+"-exit-to").split(" "),move:(e.moveClass||n+"-move").split(" ")}})}function X(e){requestAnimationFrame(()=>requestAnimationFrame(e))}function fe(e,n,t,s){const{onBeforeEnter:i,onEnter:c,onAfterEnter:d}=n;i?.(t),t.classList.add(...e.enter),t.classList.add(...e.enterActive),queueMicrotask(()=>{if(!t.parentNode)return s?.();c?.(t,()=>l())}),X(()=>{t.classList.remove(...e.enter),t.classList.add(...e.enterTo),(!c||c.length<2)&&(t.addEventListener("transitionend",l),t.addEventListener("animationend",l))});function l(a){(!a||a.target===t)&&(s?.(),t.removeEventListener("transitionend",l),t.removeEventListener("animationend",l),t.classList.remove(...e.enterActive),t.classList.remove(...e.enterTo),d?.(t))}}function ve(e,n,t,s){const{onBeforeExit:i,onExit:c,onAfterExit:d}=n;if(!t.parentNode)return s?.();i?.(t),t.classList.add(...e.exit),t.classList.add(...e.exitActive),c?.(t,()=>l()),X(()=>{t.classList.remove(...e.exit),t.classList.add(...e.exitTo),(!c||c.length<2)&&(t.addEventListener("transitionend",l),t.addEventListener("animationend",l))});function l(a){(!a||a.target===t)&&(s?.(),t.removeEventListener("transitionend",l),t.removeEventListener("animationend",l),t.classList.remove(...e.exitActive),t.classList.remove(...e.exitTo),d?.(t))}}var xe=e=>{const n=ue(e);return le(de(()=>e.children).toArray,{appear:e.appear,exitMethod:"keep-index",onChange({added:t,removed:s,finishRemoved:i,list:c}){const d=n();for(const a of t)fe(d,e,a);const l=[];for(const a of c)a.isConnected&&(a instanceof HTMLElement||a instanceof SVGElement)&&l.push({el:a,rect:a.getBoundingClientRect()});queueMicrotask(()=>{const a=[];for(const{el:u,rect:m}of l)if(u.isConnected){const o=u.getBoundingClientRect(),r=m.left-o.left,v=m.top-o.top;(r||v)&&(u.style.transform=`translate(${r}px, ${v}px)`,u.style.transitionDuration="0s",a.push(u))}document.body.offsetHeight;for(const u of a){let m=function(o){(o.target===u||/transform$/.test(o.propertyName))&&(u.removeEventListener("transitionend",m),u.classList.remove(...d.move))};u.classList.add(...d.move),u.style.transform=u.style.transitionDuration="",u.addEventListener("transitionend",m)}});for(const a of s)ve(d,e,a,()=>i([a]))}})};const ge=M('<div class="text-xl text-blue-500 dark:text-blue-300 font-semibold text-center mt-5">You have won!!!'),he=M('<div><div class="text-center mb-5"><div class="text-lg font-medium text-blue-500 dark:text-blue-300">Score: <!$><!/></div><div class="text-lg font-medium text-amber-700 dark:text-amber-300">Highscore: <!$><!/></div></div><div class="flex justify-center mb-5"><button class="bg-blue-500 dark:bg-blue-300 text-white dark:text-black px-3 py-2 rounded">Reset</button></div><div class="select-none grid grid-cols-4 gap-2 bg-blue-100 dark:bg-blue-950 rounded-lg p-3 max-w-sm mx-auto"></div><!$><!/>'),me=M("<div>fallback"),be=M("<span>"),ke=M('<div class="group-item rounded text-2xl font-bold flex justify-center items-center w-full aspect-ratio-square">'),T=e=>({value:e});function K(e,n=1){const t=[...e];let s=0;for(;s<n;){if(t.every(c=>c.value>0))return t;const i=Math.floor(Math.random()*t.length);t[i].value>0||(t[i]=T(Math.random()>.5?2:4),s++)}return t}function P(){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].map(n=>T(0));return K(e,2)}function A(e){return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}function C(e){return e.flat()}function j(e){return e.map(t=>[...t])}function pe(e){const n=j(e);return e.forEach((t,s)=>{t.forEach((i,c)=>{n[c][4-1-s]=i})}),n}function Ee(e){const n=j(e);return e.forEach((t,s)=>{t.forEach((i,c)=>{n[4-1-c][s]=i})}),n}function R(e,n){const t=j(e);for(let s=0;s<4;s++){const i=t[s];let c=!0;for(let d=2;d>=0;d--){const l=i[d];if(l.value===0)continue;let a=d+1;for(;!(a>=4);){const u=i[a];if(c&&l.value===u.value){i[d]=T(0),i[a]=T(l.value*2),c=!1,n(l.value*2);break}if(u.value>0)break;a++}}for(let d=2;d>=0;d--){const l=i[d];if(l.value===0)continue;let a=d;for(;;){const u=i[a+1];if(!u||u.value>0||a===3)break;if(u.value===0)a+=1;else break}i[d]=T(0),i[a]=l}}return t}function Le(e,n){return e.length!==n.length?!1:e.every((t,s)=>n[s].value===t.value)}const U="highscore";function $e(){const[e,n]=y(P()),[t,s]=y(!1),[i,c]=y(0),[d,l]=y(0);function a(o){c(v=>v+o);const r=i();r>d()&&(localStorage.setItem(U,r.toString()),l(r))}function u(){n(P()),s(!1),c(0)}oe(()=>{e().some(o=>o.value===2048)&&s(!0)});function m(o){if(t())return;let r=0;function v(f){Le(e(),f)||(n(K(f)),a(r))}const h=Ee,x=pe;switch(o){case"up":{const f=A(e()),k=x(f),p=R(k,E=>r+=E),b=h(p),g=C(b);v(g);break}case"down":{const f=A(e()),k=x(x(x(f))),p=R(k,E=>r+=E),b=h(h(h(p))),g=C(b);v(g);break}case"right":{const f=A(e()),k=R(f,b=>r+=b),p=C(k);v(p);break}case"left":{const f=A(e()),k=x(x(f)),p=R(k,E=>r+=E),b=h(h(p)),g=C(b);v(g);break}}}return N(()=>{l(+(localStorage.getItem(U)??"0"));const o=r=>{switch(r.key){case"ArrowUp":{m("up");break}case"ArrowDown":{m("down");break}case"ArrowRight":{m("right");break}case"ArrowLeft":{m("left");break}}};document.addEventListener("keydown",o),Y(()=>{document.removeEventListener("keydown",o)})}),N(()=>{let o=null,r=null;function v(x){const[f]=x.touches;f&&(o=f.clientX,r=f.clientY)}function h(x){if(!o||!r)return;const[f]=x.touches;if(!f)return;const k=f.clientX,p=f.clientY,b=o-k,g=r-p;Math.abs(b)>Math.abs(g)?b>0?m("left"):m("right"):g>0?m("up"):m("down"),o=null,r=null}document.addEventListener("touchstart",v),document.addEventListener("touchmove",h),Y(()=>{document.removeEventListener("touchstart",v),document.removeEventListener("touchend",h)})}),(()=>{const o=$(he),r=o.firstChild,v=r.firstChild,h=v.firstChild,x=h.nextSibling,[f,k]=D(x.nextSibling),p=v.nextSibling,b=p.firstChild,g=b.nextSibling,[E,z]=D(g.nextSibling),G=r.nextSibling,J=G.firstChild,I=G.nextSibling,Q=I.nextSibling,[Z,ee]=D(Q.nextSibling);return w(v,i,f,k),w(p,d,E,z),J.$$click=u,w(I,_(xe,{name:"group-item",get children(){return _(ae,{get each(){return e()},get fallback(){return $(me)},children:L=>(()=>{const q=$(ke);return w(q,_(V,{get when(){return L.value>0},get children(){const S=$(be);return w(S,()=>L.value),S}})),se(S=>ce(q,{"bg-blue-200 dark:bg-blue-900":L.value===0,"bg-indigo-300 dark:bg-indigo-800 text-indigo-800 dark:text-indigo-400":L.value===2,"bg-indigo-400 dark:bg-indigo-700 text-indigo-900 dark:text-indigo-300":L.value===4,"bg-violet-300 dark:bg-violet-800 text-violet-800 dark:text-violet-400":L.value===8,"bg-violet-400 dark:bg-violet-700 text-violet-900 dark:text-violet-300":L.value===16,"bg-purple-300 dark:bg-purple-800 text-purple-800 dark:text-violet-400":L.value===32,"bg-purple-400 dark:bg-purple-700 text-purple-900 dark:text-violet-300":L.value===64,"bg-fuchsia-300 dark:bg-fuchsia-800 text-fuchsia-800 dark:text-fuchsia-400":L.value===128,"bg-fuchsia-400 dark:bg-fuchsia-700 text-fuchsia-900 dark:text-fuchsia-400":L.value===256,"bg-pink-300 dark:bg-pink-800 text-pink-800 dark:text-pink-400":L.value===512,"bg-pink-400 dark:bg-pink-700 text-pink-900 dark:text-pink-300":L.value===1024,"bg-red-500 dark:bg-red-600 text-red-900 dark:text-red-100":L.value===2048},S)),q})()})}})),w(o,_(V,{get when(){return t()},get children(){return $(ge)}}),Z,ee),re(),o})()}ie(["click"]);export{$e as default};
