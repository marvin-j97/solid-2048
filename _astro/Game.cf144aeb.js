import{u as j,c as F,a as q,$ as K,b as U,d as X,e as z,o as J,g as L,f as W,i as $,h as C,r as O,t as T,F as Q,S as D,j as Z,k as ee,l as te}from"./web.e4611299.js";var G=()=>{};function ne(e,n){const t=j(e),{onChange:r}=n;let o=new Set(n.appear?void 0:t);const s=new WeakSet,[d,l]=F([],{equals:!1}),[i]=U(),a=n.exitMethod==="remove"?G:u=>{l(c=>(c.push.apply(c,u),c));for(const c of u)s.delete(c)},x=n.exitMethod==="remove"?G:n.exitMethod==="keep-index"?(u,c,v)=>u.splice(v,0,c):(u,c)=>u.push(c);return q(u=>{const c=d(),v=e();if(v[K],j(i))return i(),u;if(c.length){const m=u.filter(h=>!c.includes(h));return c.length=0,r({list:m,added:[],removed:[],unchanged:m,finishRemoved:a}),m}return j(()=>{const m=new Set(v),h=v.slice(),b=[],g=[],M=[];for(const p of v)(o.has(p)?M:b).push(p);let w=!b.length;for(let p=0;p<u.length;p++){const f=u[p];m.has(f)||(s.has(f)||(g.push(f),s.add(f)),x(h,f,p)),w&&f!==h[p]&&(w=!1)}return!g.length&&w?u:(r({list:h,added:b,removed:g,unchanged:M,finishRemoved:a}),o=m,h)})},n.appear?[]:t.slice())}var H=e=>e instanceof Element;function N(e,n){if(n(e))return e;if(typeof e=="function"&&!e.length)return N(e(),n);if(Array.isArray(e)){const t=[];for(const r of e){const o=N(r,n);o&&(Array.isArray(o)?t.push.apply(t,o):t.push(o))}return t.length?t:null}return null}function ie(e,n=H,t=H){const r=q(e),o=q(()=>N(r(),n));return o.toArray=()=>{const s=o();return Array.isArray(s)?s:s?[s]:[]},o}function oe(e){return q(()=>{const n=e.name||"s";return{enterActive:(e.enterActiveClass||n+"-enter-active").split(" "),enter:(e.enterClass||n+"-enter").split(" "),enterTo:(e.enterToClass||n+"-enter-to").split(" "),exitActive:(e.exitActiveClass||n+"-exit-active").split(" "),exit:(e.exitClass||n+"-exit").split(" "),exitTo:(e.exitToClass||n+"-exit-to").split(" "),move:(e.moveClass||n+"-move").split(" ")}})}function Y(e){requestAnimationFrame(()=>requestAnimationFrame(e))}function re(e,n,t,r){const{onBeforeEnter:o,onEnter:s,onAfterEnter:d}=n;o?.(t),t.classList.add(...e.enter),t.classList.add(...e.enterActive),queueMicrotask(()=>{if(!t.parentNode)return r?.();s?.(t,()=>l())}),Y(()=>{t.classList.remove(...e.enter),t.classList.add(...e.enterTo),(!s||s.length<2)&&(t.addEventListener("transitionend",l),t.addEventListener("animationend",l))});function l(i){(!i||i.target===t)&&(r?.(),t.removeEventListener("transitionend",l),t.removeEventListener("animationend",l),t.classList.remove(...e.enterActive),t.classList.remove(...e.enterTo),d?.(t))}}function se(e,n,t,r){const{onBeforeExit:o,onExit:s,onAfterExit:d}=n;if(!t.parentNode)return r?.();o?.(t),t.classList.add(...e.exit),t.classList.add(...e.exitActive),s?.(t,()=>l()),Y(()=>{t.classList.remove(...e.exit),t.classList.add(...e.exitTo),(!s||s.length<2)&&(t.addEventListener("transitionend",l),t.addEventListener("animationend",l))});function l(i){(!i||i.target===t)&&(r?.(),t.removeEventListener("transitionend",l),t.removeEventListener("animationend",l),t.classList.remove(...e.exitActive),t.classList.remove(...e.exitTo),d?.(t))}}var ae=e=>{const n=oe(e);return ne(ie(()=>e.children).toArray,{appear:e.appear,exitMethod:"keep-index",onChange({added:t,removed:r,finishRemoved:o,list:s}){const d=n();for(const i of t)re(d,e,i);const l=[];for(const i of s)i.isConnected&&(i instanceof HTMLElement||i instanceof SVGElement)&&l.push({el:i,rect:i.getBoundingClientRect()});queueMicrotask(()=>{const i=[];for(const{el:a,rect:x}of l)if(a.isConnected){const u=a.getBoundingClientRect(),c=x.left-u.left,v=x.top-u.top;(c||v)&&(a.style.transform=`translate(${c}px, ${v}px)`,a.style.transitionDuration="0s",i.push(a))}document.body.offsetHeight;for(const a of i){let x=function(u){(u.target===a||/transform$/.test(u.propertyName))&&(a.removeEventListener("transitionend",x),a.classList.remove(...d.move))};a.classList.add(...d.move),a.style.transform=a.style.transitionDuration="",a.addEventListener("transitionend",x)}});for(const i of r)se(d,e,i,()=>o([i]))}})};const ce=T('<div class="text-xl text-blue-500 font-semibold text-center mt-5">You have won!!!'),le=T('<div><div class="text-center mb-5"><button class="text-lg font-medium text-blue-500">Score: <!$><!/></button></div><div class="flex justify-center mb-5"><button class="bg-blue-500 text-white px-3 py-2 rounded">Reset</button></div><div class="select-none grid grid-cols-4 gap-2 bg-blue-100 rounded-lg p-3 max-w-sm mx-auto"></div><!$><!/>'),ue=T("<div>fallback"),de=T("<span>"),fe=T('<div class="group-item rounded text-2xl font-bold flex justify-center items-center w-full aspect-ratio-square">'),y=e=>({value:e});function I(e,n=1){const t=[...e];let r=0;for(;r<n;){if(t.every(s=>s.value>0))return t;const o=Math.floor(Math.random()*t.length);t[o].value>0||(t[o]=y(Math.random()>.5?2:4),r++)}return t}function P(){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].map(n=>y(0));return I(e,2)}function _(e){return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}function S(e){return e.flat()}function V(e){return e.map(t=>[...t])}function k(e){const n=V(e);return e.forEach((t,r)=>{t.forEach((o,s)=>{n[s][4-1-r]=o})}),n}function E(e){const n=V(e);return e.forEach((t,r)=>{t.forEach((o,s)=>{n[4-1-s][r]=o})}),n}function R(e,n){const t=V(e);for(let r=0;r<4;r++){const o=t[r];let s=!0;for(let d=2;d>=0;d--){const l=o[d];if(l.value===0)continue;let i=d+1;for(;!(i>=4);){const a=o[i];if(s&&l.value===a.value){o[d]=y(0),o[i]=y(l.value*2),s=!1,n(l.value*2);break}if(a.value>0)break;i++}}for(let d=2;d>=0;d--){const l=o[d];if(l.value===0)continue;let i=d;for(;;){const a=o[i+1];if(!a||a.value>0||i===3)break;if(a.value===0)i+=1;else break}o[d]=y(0),o[i]=l}}return t}function ve(e,n){return e.length!==n.length?!1:e.every((t,r)=>n[r].value===t.value)}function he(){const[e,n]=F(P()),[t,r]=F(!1),[o,s]=F(0);function d(i){s(a=>a+i)}function l(){n(P()),r(!1),s(0)}return z(()=>{e().some(i=>i.value===2048)&&r(!0)}),J(()=>{const i=a=>{if(t())return;let x=0;function u(c){ve(e(),c)||(n(I(c)),d(x))}switch(a.key){case"ArrowUp":{const c=_(e()),v=k(c),m=R(v,g=>x+=g),h=E(m),b=S(h);u(b);break}case"ArrowDown":{const c=_(e()),v=k(k(k(c))),m=R(v,g=>x+=g),h=E(E(E(m))),b=S(h);u(b);break}case"ArrowRight":{const c=_(e()),v=R(c,h=>x+=h),m=S(v);u(m);break}case"ArrowLeft":{const c=_(e()),v=k(k(c)),m=R(v,g=>x+=g),h=E(E(m)),b=S(h);u(b);break}}};document.addEventListener("keydown",i),ee(()=>{document.removeEventListener("keydown",i)})}),(()=>{const i=L(le),a=i.firstChild,x=a.firstChild,u=x.firstChild,c=u.nextSibling,[v,m]=W(c.nextSibling),h=a.nextSibling,b=h.firstChild,g=h.nextSibling,M=g.nextSibling,[w,p]=W(M.nextSibling);return x.$$click=l,$(x,o,v,m),b.$$click=l,$(g,C(ae,{name:"group-item",get children(){return C(Q,{get each(){return e()},get fallback(){return L(ue)},children:f=>(()=>{const B=L(fe);return $(B,C(D,{get when(){return f.value>0},get children(){const A=L(de);return $(A,()=>f.value),A}})),Z(A=>te(B,{"bg-blue-200":f.value===0,"bg-blue-400 text-blue-900":f.value===1,"bg-indigo-300 text-indigo-800":f.value===2,"bg-indigo-400 text-indigo-900":f.value===4,"bg-violet-300 text-violet-800":f.value===8,"bg-violet-400 text-violet-900":f.value===16,"bg-purple-300 text-purple-800":f.value===32,"bg-purple-400 text-purple-900":f.value===64,"bg-fuchsia-300 text-fuchsia-800":f.value===128,"bg-fuchsia-400 text-fuchsia-900":f.value===256,"bg-pink-300 text-pink-800":f.value===512,"bg-pink-400 text-pink-900":f.value===1024,"bg-red-300 text-red-800":f.value===2048},A)),B})()})}})),$(i,C(D,{get when(){return t()},get children(){return L(ce)}}),w,p),O(),i})()}X(["click"]);export{he as default};
